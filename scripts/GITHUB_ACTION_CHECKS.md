# Pre-commit Check è„šæœ¬ä½¿ç”¨è¯´æ˜

## å½“å‰çŠ¶æ€

âœ… è„šæœ¬å·²åˆ›å»º: `scripts/pre-commit-check.sh`
âœ… npm å‘½ä»¤å·²æ·»åŠ : `npm run pre-commit`

## ä½¿ç”¨å‰å‡†å¤‡

### å®‰è£…ä¾èµ–

ç”±äº `redis-memory-server` å¯èƒ½åœ¨æŸäº›ç¯å¢ƒä¸‹ç¼–è¯‘å¤±è´¥ï¼Œå»ºè®®ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å®‰è£…ï¼š

```bash
# è·³è¿‡ postinstall è„šæœ¬å®‰è£…ä¾èµ–ï¼ˆæ¨èï¼‰
npm install --ignore-scripts
```

### å¿«é€Ÿæ£€æŸ¥

ç”±äº `motia` åŒ…å¯èƒ½éœ€è¦ç‰¹æ®Šå®‰è£…,å»ºè®®è·³è¿‡ç±»å‹ç”Ÿæˆæ­¥éª¤:

```bash
# å¿«é€Ÿæ£€æŸ¥(è·³è¿‡æµ‹è¯•å’Œç±»å‹ç”Ÿæˆ)
SKIP_TESTS=1 SKIP_TYPES=1 npm run pre-commit
```

## å®Œæ•´ä½¿ç”¨æµç¨‹

1. **é¦–æ¬¡è¿è¡Œ - å®‰è£…ä¾èµ–**
   ```bash
   # ä½¿ç”¨ --ignore-scripts è·³è¿‡å¯èƒ½çš„ç¼–è¯‘é—®é¢˜
   npm install --ignore-scripts
   ```

2. **è¿è¡Œé¢„æäº¤æ£€æŸ¥**
   ```bash
   # å®Œæ•´æ£€æŸ¥(åŒ…æ‹¬æµ‹è¯•)
   npm run pre-commit

   # å¿«é€Ÿæ£€æŸ¥(è·³è¿‡æµ‹è¯•)
   SKIP_TESTS=1 npm run pre-commit

   # è·³è¿‡ç±»å‹ç”Ÿæˆå’Œæµ‹è¯•(æœ€å¿«)
   SKIP_TESTS=1 SKIP_TYPES=1 npm run pre-commit
   ```

## è„šæœ¬åŠŸèƒ½

è„šæœ¬æ‰§è¡Œä»¥ä¸‹ GitHub Actions æ£€æŸ¥:

1. âœ… æ£€æŸ¥ä¾èµ– (node_modules å­˜åœ¨)
2. âœ… ç”Ÿæˆ Motia ç±»å‹ (å¯é€‰,é€šè¿‡ SKIP_TYPES=1 è·³è¿‡)
3. âœ… TypeScript ç±»å‹æ£€æŸ¥ (`npx tsc --noEmit`)
4. âœ… ESLint æ£€æŸ¥ (`npm run lint`)
5. âœ… TypeScript ç¼–è¯‘ (`npm run build:ts`)
6. âœ… Jest æµ‹è¯• (å¯é€‰,é€šè¿‡ SKIP_TESTS=1 è·³è¿‡)

## ç¯å¢ƒå˜é‡

- `SKIP_TESTS=1`: è·³è¿‡ Jest æµ‹è¯•
- `SKIP_TYPES=1`: è·³è¿‡ Motia ç±»å‹ç”Ÿæˆ

## è¾“å‡ºç¤ºä¾‹

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                              â•‘
â•‘  ğŸš€ Pre-commit CI Check                                                      â•‘
â•‘  Running all GitHub Actions checks locally                                   â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  1. Checking Dependencies
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ“ Dependencies found (node_modules exists)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  3. TypeScript Type Check (tsc --noEmit)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ“ TypeScript type check passed

... æ›´å¤šè¾“å‡º ...

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  Summary
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ“ All CI checks passed!

  Passed: 5
  Failed: 0

  Time taken: 23s

ğŸ‰ Safe to commit!
```

## æ–‡ä»¶æ¸…å•

- `scripts/pre-commit-check.sh` - ä¸»è„šæœ¬
- `scripts/README.md` - è¯¦ç»†æ–‡æ¡£
- `scripts/PRE_COMMIT_CHECK.md` - ä½¿ç”¨è¯´æ˜

## ä¸‹ä¸€æ­¥

å°†è„šæœ¬é›†æˆåˆ°å¼€å‘æµç¨‹:

```bash
# è¿è¡Œæ£€æŸ¥
npm run pre-commit

# å¦‚æœé€šè¿‡,æäº¤ä»£ç 
git add .
git commit -m "your commit message"
```
